(window.webpackJsonp=window.webpackJsonp||[]).push([[164,135],{1311:function(t,e,r){var content=r(1353);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(64).default)("9892f3a0",content,!0,{sourceMap:!1})},1352:function(t,e,r){"use strict";r(1311)},1353:function(t,e,r){var o=r(63)((function(i){return i[1]}));o.push([t.i,".cropper[data-v-968a3d4c]{height:300px}[data-v-968a3d4c] .vue-advanced-cropper__background{left:50%;opacity:1;position:absolute;top:50%;transform:translate(-50%,-50%)}[data-v-968a3d4c] .vue-simple-handler{background:#fff}.slider[data-v-968a3d4c]{-webkit-appearance:none;background:#d3d3d3;border-radius:5px;height:.5rem;opacity:.7;outline:none;transition:opacity .2s;width:100%}.slider[data-v-968a3d4c]:hover{opacity:1}.slider[data-v-968a3d4c]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;background:#ff7171;border-radius:50%;cursor:pointer;height:1.1rem;width:1.1rem}.slider[data-v-968a3d4c]::-moz-range-thumb{background:#ff7171;border-radius:50%;cursor:pointer;height:1.1rem;width:1.1rem}",""]),o.locals={},t.exports=o},1476:function(t,e,r){"use strict";r.r(e);r(17);var o=r(14),n=r(7),c=r(8),l=r(10),d=r(9),h=r(6),f=(r(13),r(32),r(39),r(3)),v=r(1),m=r(741),w=r(165),main=(r(742),r(15)),k=r(18),x=(r(743),r(0)),y=r(683);function C(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,o=Object(h.a)(t);if(e){var n=Object(h.a)(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return Object(d.a)(this,r)}}var j=function(t){Object(l.a)(h,t);var e,r,d=C(h);function h(){var t;return Object(n.a)(this,h),(t=d.apply(this,arguments)).MainStore=Object(v.getModule)(main.default,t.$store),t.PopupStore=Object(v.getModule)(k.default,t.$store),t.degree=0,t.currentCropRatio=1,t.cropperChanged=!1,t.isLoading=!1,t}return Object(c.a)(h,[{key:"popup",get:function(){return this.PopupStore.editSketchMapPopup},set:function(t){this.PopupStore.toggleEditSketchMapPopup(t)}},{key:"watchPopup",value:function(){this.degree=this.image.degree||0,this.cropperChanged=!1,this.popup&&this.initCropBox()}},{key:"watchCropRatio",value:function(){this.initCropBox()}},{key:"image",get:function(){return this.MainStore.imageEditor}},{key:"firstUpload",get:function(){return this.MainStore.imageEditor.firstUpload}},{key:"path",get:function(){return this.MainStore.imageEditor.path}},{key:"pathkey",get:function(){return this.MainStore.imageEditor.key}},{key:"index",get:function(){return this.MainStore.imageEditor.index}},{key:"cropRatio",get:function(){return this.MainStore.imageCropRatio}},{key:"cropRatioIsNaN",get:function(){return isNaN(this.MainStore.imageCropRatio)}},{key:"imageURL",get:function(){return this.MainStore.imageEditor.imageURL||""},set:function(t){this.MainStore.setImageEditorFilter(t)}},{key:"initCropBox",value:(r=Object(o.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!this.image.cropSize||!this.image.cropPosition){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,this.$nextTick();case 5:null==(e=this.$refs["map-cropper-popup"])||e.setCoordinates([function(t){var e=t.imageSize;return{width:e.width,height:e.height}},function(t){var e=t.coordinates,r=t.imageSize;return{left:r.width/2-e.width/2,top:r.height/2-e.height/2}}]),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0,"init error");case 12:case"end":return t.stop()}}),t,this,[[0,9]])}))),function(){return r.apply(this,arguments)})},{key:"rotateAdvancedImage",value:function(t){var e=this.$refs["map-cropper-popup"];this.degree+t>=360?this.degree=this.degree+t-360:this.degree+=t,e.rotate(t),this.cropperChanged=!0}},{key:"clickCancel",value:function(){var t=this.$refs["map-cropper-popup"];this.popup=!1,t.reset(),this.degree=0,this.cropperChanged=!0}},{key:"deleteImage",value:function(){this.isLoading=!0,this.popup=!1,null!=this.index&&this.MainStore.deleteSketchMap(this.index),this.isLoading=!1}},{key:"cropperChange",value:function(){var t=this.$refs["map-cropper-popup"];this.cropperChanged&&(this.image.cropRatio?t.zoom(0):t.setCoordinates((function(t){var e=t.imageSize;return{width:e.width,height:e.height}})),this.cropperChanged=!1)}},{key:"uploadEditedImage",value:(e=Object(o.a)(regeneratorRuntime.mark((function t(){var e,r,o,data,n,c,image,l,d,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.$refs["map-cropper-popup"],r=e.getResult(),o=r.coordinates,data=new FormData,t.prev=3,this.isLoading=!0,t.next=7,Object(x.a)(this.image.original);case 7:return n=t.sent,data.append("images",n),data.append("crop",JSON.stringify(o)),data.append("degree",this.degree.toString()),t.next=13,this.$axios.post("/image",data);case 13:c=t.sent,image=c.data,l={width:o.width,height:o.height},d={left:o.left,top:o.top},h={url:image.url,original:this.image.original,cropSize:l,cropPosition:d,edit:!1,degree:this.degree,firstUpload:!1},this.MainStore.changeSketchMap({i:this.index,picture:h}),this.popup=!1,t.next=25;break;case 22:t.prev=22,t.t0=t.catch(3),console.log(t.t0,"d");case 25:return t.prev=25,this.isLoading=!1,t.finish(25);case 28:case"end":return t.stop()}}),t,this,[[3,22,25,28]])}))),function(){return e.apply(this,arguments)})}]),h}(Object(v.mixins)(v.Vue,w.a));Object(f.a)([Object(v.Watch)("popup")],j.prototype,"watchPopup",null),Object(f.a)([Object(v.Watch)("cropRatio")],j.prototype,"watchCropRatio",null);var _=j=Object(f.a)([Object(v.Component)({components:{Cropper:m.a,LoadingIcon:y.default}})],j),O=(r(1352),r(12)),component=Object(O.a)(_,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e("Popup",{attrs:{full:!0},model:{value:t.popup,callback:function(e){t.popup=e},expression:"popup"}},[e("div",{staticClass:"bg-[#fafafa] rounded-xl"},[e("div",{staticClass:"mb-6 sm:mb-12 p-5 sm:p-8 relative bg-[#eee] border border-[#ccc] rounded-t-xl sm:text-[1.6rem] sm:leading-[2.2rem] text-center"},[t._v("\n      약도 편집\n    ")]),t._v(" "),e("div",{staticClass:"mx-6 sm:mx-12 p-6 sm:p-12 flex justify-center bg-[#7c7c7c] border border-[#ccc] rounded-xl"},[e("cropper",{ref:"map-cropper-popup",staticClass:"cropper",attrs:{src:t.imageProxy(t.image.original),"default-transforms":{rotate:t.image.degree},"stencil-props":{aspectRatio:t.image.cropRatio},"resize-image":{adjustStencil:!0},"check-orientation":!1,canvas:!1,"auto-zoom":!1,"default-position":t.image.cropPosition,"default-size":t.image.cropSize},on:{change:t.cropperChange}}),t._v(" "),t.isLoading?e("div",{staticClass:"w-full h-full absolute top-0 left-0 flex flex-col justify-center items-center"},[e("div",{staticClass:"flex flex-col justify-center items-center relative w-full h-full"},[e("div",{staticClass:"absolute w-full h-full top-0 left-0"}),t._v(" "),e("div",{staticClass:"p-6 z-50 flex flex-col items-center justfy-center bg-black/50 rounded-xl text-white"},[e("svg",{staticClass:"animate-spin mb-6 h-12 w-12 text-white z-50",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"}},[e("circle",{staticClass:"opacity-25",attrs:{cx:"12",cy:"12",r:"10",stroke:"white","stroke-width":"4"}}),t._v(" "),e("path",{staticClass:"opacity-75",attrs:{fill:"white",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"}})]),t._v(" "),e("span",{},[t._v("사진을 업로드하고 있습니다. 잠시만 기다려 주세요.")]),t._v(" "),e("span",{},[t._v("용량이 큰 파일일수록 더 오래걸립니다.")])])])]):t._e()],1),t._v(" "),e("div",{staticClass:"p-6 sm:p-12 flex justify-between border-b"},[e("button",{staticClass:"usebtn basicstyle sm:w-[8.125rem] w-[21.5%]",attrs:{disabled:t.isLoading},on:{click:function(e){t.firstUpload?t.deleteImage():t.clickCancel()}}},[t.isLoading?e("LoadingIcon",{attrs:{color:"gray"}}):[!0===t.firstUpload?e("svg",{staticClass:"h-7 w-7",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256"}},[e("rect",{attrs:{fill:"none",height:"256",width:"256"}}),t._v(" "),e("line",{attrs:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"12",x1:"216",x2:"40",y1:"56",y2:"56"}}),t._v(" "),e("line",{attrs:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"12",x1:"104",x2:"104",y1:"104",y2:"168"}}),t._v(" "),e("line",{attrs:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"12",x1:"152",x2:"152",y1:"104",y2:"168"}}),t._v(" "),e("path",{attrs:{d:"M200,56V208a8,8,0,0,1-8,8H64a8,8,0,0,1-8-8V56",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"12"}}),t._v(" "),e("path",{attrs:{d:"M168,56V40a16,16,0,0,0-16-16H104A16,16,0,0,0,88,40V56",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"12"}})]):t._e(),t._v(" "),!1===t.firstUpload?e("svg",{staticClass:"h-8 w-8",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"}},[e("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"}})]):t._e(),t._v(" "),e("span",{staticClass:"ml-1"},[t._v(t._s(t.firstUpload?"삭제":"취소"))])]],2),t._v(" "),e("button",{staticClass:"usebtn basicstyle sm:w-[8.125rem] w-[21.5%]",attrs:{disabled:t.isLoading},on:{click:function(e){return t.rotateAdvancedImage(90)}}},[t.isLoading?e("LoadingIcon",{attrs:{color:"gray"}}):[e("svg",{staticClass:"h-6 w-6",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 35 35"}},[e("path",{attrs:{d:"M17.505,34.727a17.227,17.227,0,1,1,15.859-23.9,1.25,1.25,0,0,1-2.3.969,14.727,14.727,0,1,0-7.873,19.282,1.25,1.25,0,0,1,.969,2.305A17.127,17.127,0,0,1,17.505,34.727Z"}}),t._v(" "),e("path",{attrs:{d:"M33.426,13.217h-.01l-9.788-.075a1.25,1.25,0,0,1,.009-2.5h.009l8.539.065.065-8.538A1.25,1.25,0,0,1,33.5.929h.009A1.249,1.249,0,0,1,34.75,2.188l-.074,9.788A1.251,1.251,0,0,1,33.426,13.217Z"}})]),t._v(" "),e("span",{staticClass:"ml-2"},[t._v("회전")])]],2),t._v(" "),e("button",{staticClass:"usebtn blackstyle sm:w-[8.125rem] w-[21.5%]",attrs:{disabled:t.isLoading},on:{click:t.uploadEditedImage}},[t.isLoading?e("LoadingIcon",{attrs:{color:"gray"}}):[e("svg",{staticClass:"h-8 w-8",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"white","stroke-width":"1"}},[e("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 13l4 4L19 7"}})]),t._v(" "),e("span",{staticClass:"ml-1"},[t._v("적용")])]],2)])])])}),[],!1,null,"968a3d4c",null);e.default=component.exports;installComponents(component,{Popup:r(54).default})},683:function(t,e,r){"use strict";r.r(e);r(13),r(17);var o=r(8),n=r(7),c=r(10),l=r(9),d=r(6),h=r(3),f=r(1);function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,o=Object(d.a)(t);if(e){var n=Object(d.a)(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return Object(l.a)(this,r)}}var m=function(t){Object(c.a)(r,t);var e=v(r);function r(){return Object(n.a)(this,r),e.apply(this,arguments)}return Object(o.a)(r)}(f.Vue);Object(h.a)([Object(f.Prop)({default:"white"})],m.prototype,"color",void 0);var w=m=Object(h.a)([f.Component],m),k=r(12),component=Object(k.a)(w,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[e("svg",{staticClass:"animate-spin h-6 w-6 text-white z-50",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"}},[e("circle",{staticClass:"opacity-25",attrs:{cx:"12",cy:"12",r:"10",stroke:t.color,"stroke-width":"4"}}),t._v(" "),e("path",{staticClass:"opacity-75",attrs:{fill:t.color,d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"}})])])}),[],!1,null,null,null);e.default=component.exports}}]);