(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{1461:function(e,t,n){var content=n(1689);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(64).default)("4f2031c6",content,!0,{sourceMap:!1})},1688:function(e,t,n){"use strict";n(1461)},1689:function(e,t,n){var o=n(63)((function(i){return i[1]}));o.push([e.i,"input[data-v-5ddc7a3f]{--tw-border-opacity:1;-webkit-appearance:none;-moz-appearance:none;appearance:none;border-color:#ccc;border-color:rgba(204,204,204,var(--tw-border-opacity));border-radius:0;border-width:1px;height:2rem;padding-left:.75rem;padding-right:.75rem}table[data-v-5ddc7a3f]{border-collapse:collapse;border-spacing:0}td[data-v-5ddc7a3f],th[data-v-5ddc7a3f]{border:1px solid #e5e5e5;padding:0!important}",""]),o.locals={},e.exports=o},1694:function(e,t,n){"use strict";n.r(t);n(17);var o=n(14),l=n(7),c=n(8),r=n(10),d=n(9),f=n(6),v=(n(39),n(35),n(13),n(75),n(93),n(43),n(47),n(48),n(58),n(3)),h=n(730),x=n(735),m=n.n(x),_=n(1),k=n(415);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(f.a)(e);if(t){var l=Object(f.a)(this).constructor;n=Reflect.construct(o,arguments,l)}else n=o.apply(this,arguments);return Object(d.a)(this,n)}}m.a.config.update({accessKeyId:"AKIA3DXW42IBAK2RL4TQ",secretAccessKey:"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",region:"ap-northeast-2"});var w=new m.a.S3({params:{Bucket:"brstudio"}}),C=function(e){Object(r.a)(f,e);var t,n,d=y(f);function f(){var e;return Object(l.a)(this,f),(e=d.apply(this,arguments)).videoEditorStore=Object(_.getModule)(k.default,e.$store),e.isOpenThumbnailList=!1,e.selectedMenu="text",e.selectedScene=null,e.selectedText=null,e.uploading=!1,e.wholeSceneEditMenuList=[{key:"brightness",label:"밝기",src:"https://cdn2.makedear.com/homepage/img/video/brightness.png"},{key:"filter",label:"필터",src:"https://cdn2.makedear.com/homepage/img/video/filter.png"},{key:"background",label:"배경",src:"https://cdn2.makedear.com/homepage/img/video/background.png"},{key:"text",label:"글자",src:"https://cdn2.makedear.com/homepage/img/video/text.png"},{key:"position",label:"위치",src:"https://cdn2.makedear.com/homepage/img/video/position.png"}],e.positionButtonList=[[{src:"",label:"좌상",position:{left:0,top:0}},{src:"",label:"중상",position:{left:30,top:0}},{src:"",label:"우상",position:{left:60,top:0}}],[{src:"",label:"좌중",position:{left:0,top:30}},{src:"",label:"중중",position:{left:30,top:30}},{src:"",label:"우중",position:{left:60,top:30}}],[{src:"",label:"좌하",position:{left:0,top:60}},{src:"",label:"중하",position:{left:30,top:60}},{src:"",label:"우하",position:{left:60,top:60}}]],e.fontList=[{id:"NotoSerif",label:"노토 세리프",fontFamily:"NotoSerif"},{id:"InkLipquid",label:"더페이스샵",fontFamily:"InkLipquid"},{id:"GyeonggiBatang",label:"경기 바탕",fontFamily:"GyeonggiBatang"}],e.fontSizeList=[10,11,12,13,14,15,16],e}return Object(c.a)(f,[{key:"bgImage",get:function(){return this.selectedScene&&this.selectedScene.backgroundImage||""}},{key:"texts",get:function(){return this.selectedScene?this.selectedScene.texts:[]}},{key:"pictures",get:function(){return console.log(this.selectedScene?this.selectedScene.pictures:[],"cuftm"),this.selectedScene?this.selectedScene.pictures:[]}},{key:"mediaMeta",get:function(){return this.selectedScene.mediaMeta}},{key:"scenes",get:function(){return this.videoEditorStore.editor[this.sectionName].scene.cards.filter((function(e){return"scene"===e.type}))}},{key:"textX",get:function(){return this.selectedText.left},set:function(e){var t=this.selectedText.id;this.videoEditorStore.setSceneTextPosition({sectionName:this.sectionName,id:this.selectedScene.id,textId:t,position:{left:e,top:this.selectedText.top}})}},{key:"textY",get:function(){return this.selectedText.top},set:function(e){var t=this.selectedText.id;this.videoEditorStore.setSceneTextPosition({sectionName:this.sectionName,id:this.selectedScene.id,textId:t,position:{left:this.selectedText.left,top:e}})}},{key:"setIsOpenThumbnailList",value:function(e){this.isOpenThumbnailList=e}},{key:"selectScene",value:function(e){this.selectedScene=e,1===e.texts.length?this.selectedText=e.texts[0]:this.selectedText=null}},{key:"selectText",value:function(text){this.selectedText=text}},{key:"selectMenu",value:function(e){this.selectedMenu=e}},{key:"onClickPositionInfo",value:function(){this.videoEditorStore.setSelectPositionPopupVisible(!0)}},{key:"onClickPositionButton",value:function(e){var t=this.selectedText.id;this.videoEditorStore.setSceneTextPosition({sectionName:this.sectionName,id:this.selectedScene.id,textId:t,position:e})}},{key:"onClickInitPosition",value:function(){var e=this.selectedText.id;this.videoEditorStore.initSceneTextPosition({sectionName:this.sectionName,id:this.selectedScene.id,textId:e})}},{key:"onDragStart",value:function(){}},{key:"onDragOver",value:function(){}},{key:"onDrop",value:function(e){if(this.selectedScene&&this.selectedText){var t=1920*e.offsetX/480,n=1080*e.offsetY/270,o=this.selectedText.id;this.videoEditorStore.setSceneTextPosition({sectionName:this.sectionName,id:this.selectedScene.id,textId:o,position:{left:t,top:n}})}}},{key:"onDragLeave",value:function(){}},{key:"getVailidFile",value:function(data){for(var e=[],t=data.length,n=52428800,o=!1,i=0;i<t;i++){var l=data.item(i);if((null==l?void 0:l.size)>n&&(o=!0),(null==l?void 0:l.type.includes("image/"))&&(null==l?void 0:l.size)<=n)return e.push(l),{file:l,sizeOver:o}}return{file:null,sizeOver:o}}},{key:"upload",value:(n=Object(o.a)(regeneratorRuntime.mark((function e(t){var path,n,o,l,c,r,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return path="".concat(Object(h.a)(12),".jpeg"),e.next=3,w.upload({Bucket:"brstudio/uploads",ACL:"public-read",Key:path,Body:t,CacheControl:"max-age=31536000"},{partSize:1073741824}).promise();case 3:return n="https://9fuou4qfa3.execute-api.ap-northeast-2.amazonaws.com/image-stage",e.next=6,Promise.all([this.$axios.post(n,{fileName:path,size:500}),this.$axios.post(n,{fileName:path,size:1920})]);case 6:return l="".concat(o="https://d7vu8gxshmcan.cloudfront.net","/w-1920/").concat(path),c="".concat(o,"/w-500/").concat(path),e.next=11,this.$img.getMeta(c);case 11:return r=e.sent,d=r.width,f=r.height,e.abrupt("return",{resized:l,thumbnail:c,width:d,height:f});case 15:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"openPictureUploadWarningPopup",value:function(title,body){this.videoEditorStore.setPictureUploadWarningPopupTitle(title),this.videoEditorStore.setPictureUploadWarningPopupBody(body),this.videoEditorStore.setPictureUploadWarningPopupVisible(!0)}},{key:"uploadPictures",value:(t=Object(o.a)(regeneratorRuntime.mark((function e(t){var n,o,l,c,r,d,f,v,h,x=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.target.files||(null===(n=t.dataTransfer)||void 0===n?void 0:n.files)){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,this.uploading=!0,l=this.getVailidFile(o),c=l.file,l.sizeOver&&this.openPictureUploadWarningPopup("사진의 용량이 너무 큽니다.",["사진을 ".concat(50,"MB 이하로 최적화하여 업로드해 주세요.")]),e.next=9,this.upload(c);case 9:r=e.sent,d=r.resized,r.thumbnail,f=r.width,v=r.height,this.videoEditorStore.setScenePicture({sectionName:this.sectionName,sceneId:this.selectedScene.id,url:d,width:f,height:v}),this.selectedScene=this.scenes.find((function(e){return e.id===x.selectedScene.id})),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(3),console.log(e.t0,"error");case 21:return e.prev=21,this.uploading=!1,(h=this.$refs["".concat(this.sectionName,"total-input")])&&(h.value=""),e.finish(21);case 26:case"end":return e.stop()}}),e,this,[[3,18,21,26]])}))),function(e){return t.apply(this,arguments)})},{key:"mounted",value:function(){this.selectedScene=this.scenes[0]}}]),f}(_.Vue);Object(v.a)([Object(_.Prop)()],C.prototype,"sectionName",void 0);var S=C=Object(v.a)([_.Component],C),P=(n(1688),n(12)),component=Object(P.a)(S,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"m-8 max-w-[480px] text-center"},[t("div",{staticClass:"text-[#e57979]"},[e._v("\n    1절, 2절 편지글의 위치와 정렬을 변경하실 수 있습니다.\n  ")]),e._v(" "),t("div",{staticClass:"text-[#ccc]"},[e._v("\n    그 외의 장면 또는 장면별 변경을 원하시면 각 장면의 편집창에서 변경해 주세요.\n  ")]),e._v(" "),t("div",{staticClass:"mt-4 relative w-full aspect-w-16 aspect-h-9 max-h-[270px] rounded-lg bg-black bg-top overflow-hidden",on:{dragover:function(t){return t.preventDefault(),e.onDragOver.apply(null,arguments)},drop:function(t){return t.preventDefault(),e.onDrop.apply(null,arguments)}}},[t("img",{staticClass:"absolute w-full top-0 left-0 select-none pointer-events-none z-20",attrs:{draggable:"false",src:e.bgImage}}),e._v(" "),t("div",{staticClass:"absolute w-32 rounded-b-md top-0 right-4 left-[80%] h-fit overflow-auto z-30 select-none",staticStyle:{background:"rgba(0, 0, 0, 0.3)"}},[e.isOpenThumbnailList?t("div",{staticClass:"overflow-scroll h-[270px]"},[t("label",{staticClass:"items-center pt-2 mb-4 flex-1 flex justify-center"},[t("svg",{staticClass:"w-8 h-8",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"#ffffff"}},[t("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}})]),e._v(" "),t("input",{ref:e.sectionName+"total-input",staticStyle:{display:"none"},attrs:{type:"file",name:"image",accept:"image/*"},on:{change:e.uploadPictures}})]),e._v(" "),t("div",{staticClass:"h-[200px] overflow-auto px-4"},e._l(e.scenes,(function(n){return t("div",{key:n.id,staticClass:"mb-4 bg-white text-black rounded-lg overflow-hidden",class:{"border border-black":e.selectedScene&&e.selectedScene.id===n.id},staticStyle:{"aspect-ratio":"16/9"},on:{click:function(t){return e.selectScene(n)}}},[n.backgroundImage?t("img",{staticClass:"select-none pointer-events-none",attrs:{draggable:"false",src:n.backgroundImage}}):e._e()])})),0),e._v(" "),t("button",{staticClass:"flex w-full justify-center flex-1 items-center",on:{click:function(t){return e.setIsOpenThumbnailList(!1)}}},[t("svg",{staticClass:"w-8 h-8",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"#ffffff"}},[t("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"}})])])]):t("button",{on:{click:function(t){return e.setIsOpenThumbnailList(!0)}}},[t("svg",{staticClass:"w-8 h-8",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"#ffffff"}},[t("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"}})])])]),e._v(" "),e._l(e.pictures,(function(picture,n){return t("div",{key:picture.id,staticClass:"absolute pointer-events-none select-none z-10 w-full flex",style:{width:"".concat(e.mediaMeta[n].width,"px"),height:"".concat(e.mediaMeta[n].height,"px"),top:"".concat(e.mediaMeta[n].top,"px"),left:"".concat(e.mediaMeta[n].left,"px"),transform:"rotate(".concat(e.mediaMeta[n].rotation,"deg)")}},[t("img",{staticClass:"pointer-events-none select-none z-10 w-full object-contain",class:{"h-full":picture.editInfo.height>picture.editInfo.width,"object-cover":picture.editInfo.width>picture.editInfo.height},style:{transform:"rotate(0deg)"},attrs:{src:picture.url}})])})),e._v(" "),e._l(e.texts,(function(text){return t("div",{key:text.text,staticClass:"absolute text-white w-fit h-fit select-none z-40",class:{"border border-dashed border-black":e.texts.length>1&&!e.selectedText,"border border-dashed border-red-500":e.selectedText&&e.selectedText.id===text.id},staticStyle:{"text-align":"start"},style:{top:270*text.top/1080+"px",left:480*text.left/1920+"px"},attrs:{draggable:e.selectedText&&e.selectedText.id===text.id},on:{click:function(t){return e.selectText(text)},dragstart:e.onDragStart,dragleave:e.onDragLeave}},[e._v("\n      "+e._s(text.text)+"\n    ")])}))],2),e._v(" "),t("div",{staticClass:"flex justify-center gap-6 mt-8"},e._l(e.wholeSceneEditMenuList,(function(menu){return t("button",{key:menu.key,staticClass:"flex flex-col gap-2 items-center text-center",on:{click:function(t){return e.selectMenu(menu.key)}}},[t("img",{staticClass:"mb-4 w-6 h-6 select-none",attrs:{src:menu.src}}),e._v(" "),t("div",[e._v(e._s(menu.label))])])})),0),e._v(" "),e.selectedScene?t("div",{staticClass:"mt-8"},["brightness"===e.selectedMenu?t("div",{staticClass:"flex"},[t("div",{staticClass:"flex-1"},[e._v("\n        밝기\n      ")]),e._v(" "),t("div",{staticClass:"flex-1"},[e._v("\n        우측\n      ")])]):e._e(),e._v(" "),"filter"===e.selectedMenu?t("div",{staticClass:"flex"},[t("div",{staticClass:"flex-1"},[e._v("\n        필터\n      ")]),e._v(" "),t("div",{staticClass:"flex-1"},[e._v("\n        우측\n      ")])]):e._e(),e._v(" "),"background"===e.selectedMenu?t("div",{staticClass:"flex"},[t("div",{staticClass:"flex-1"},[e._v("\n        배경\n      ")]),e._v(" "),t("div",{staticClass:"flex-1"},[e._v("\n        우측\n      ")])]):e._e(),e._v(" "),"text"===e.selectedMenu?t("div",{staticClass:"flex"},[t("div",{staticClass:"flex flex-col border mr-4",staticStyle:{"text-align":"start"}},[t("div",[e._v("글꼴")]),e._v(" "),t("select",{staticClass:"!p-0 !pr-4"},e._l(e.fontList,(function(n){return t("option",{key:n.id},[e._v("\n            "+e._s(n.label)+"\n          ")])})),0)]),e._v(" "),t("div",{staticClass:"flex flex-col border mr-4"},[t("div",[e._v("크기")]),e._v(" "),t("select",{staticClass:"!p-4 w-20"},e._l(e.fontSizeList,(function(n){return t("option",{key:n},[e._v("\n            "+e._s(n)+"\n          ")])})),0)]),e._v(" "),e._m(0),e._v(" "),e._m(1),e._v(" "),e._m(2),e._v(" "),t("div",{staticClass:"flex flex-col gap-2 items-center flex-1 text-center"},[t("div",[e._v("초기화")]),e._v(" "),t("button",{on:{click:e.onClickInitPosition}},[t("img",{attrs:{src:"https://cdn2.makedear.com/homepage/img/video/init.png"}})])])]):e._e(),e._v(" "),"position"===e.selectedMenu&&e.selectedScene.texts.length?t("div",{staticClass:"flex gap-4"},[e.selectedScene.texts.length>1&&!e.selectedText?t("div",{staticClass:"w-full"},[e._v("\n        화면에서 위치를 변경할 글자를 선택해 주세요.\n      ")]):t("div",{staticClass:"flex gap-4"},[t("div",{staticClass:"flex flex-col flex-1 justify-between"},[t("div",{staticClass:"flex items-center justify-center"},[e._v("\n            위치/정렬 "),t("button",{staticClass:"ml-4",on:{click:e.onClickPositionInfo}},[t("svg",{staticClass:"w-6 h-6",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"}},[t("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"}})])])]),e._v(" "),t("div",{staticClass:"flex-1 mt-2"},[t("table",e._l(e.positionButtonList,(function(n,i){return t("tr",{key:n[0].label+i},e._l(n,(function(button){return t("td",{key:button.label,on:{click:function(t){return e.onClickPositionButton(button.position)}}},[e._v("\n                  "+e._s(button.label)+"\n                ")])})),0)})),0)])]),e._v(" "),t("div",{staticClass:"flex flex-col flex-1"},[t("div",{staticClass:"flex gap-3"},[t("div",{staticClass:"flex flex-col gap-2 flex-1 text-center"},[t("div",[e._v("x좌표")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.textX,expression:"textX"}],staticClass:"w-full",attrs:{type:"number"},domProps:{value:e.textX},on:{input:function(t){t.target.composing||(e.textX=t.target.value)}}})]),e._v(" "),t("div",{staticClass:"flex flex-col gap-2 flex-1 text-center"},[t("div",[e._v("y좌표")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.textY,expression:"textY"}],staticClass:"w-full",attrs:{type:"number"},domProps:{value:e.textY},on:{input:function(t){t.target.composing||(e.textY=t.target.value)}}})]),e._v(" "),t("div",{staticClass:"flex flex-col gap-2 items-center flex-1 text-center"},[t("div",[e._v("초기화")]),e._v(" "),t("button",{on:{click:e.onClickInitPosition}},[t("img",{attrs:{src:"https://cdn2.makedear.com/homepage/img/video/init.png"}})])])]),e._v(" "),e._m(3)])])]):e._e()]):e._e()])}),[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"flex flex-col border mr-4"},[t("div",[e._v("글자색")]),e._v(" "),t("div",{staticClass:"flex gap-2"},[t("div",[e._v("흰색")]),e._v(" "),t("div",[e._v("검은색")]),e._v(" "),t("div",[e._v("다른색")])])])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"flex flex-col border mr-4"},[t("div",[e._v("그림자색")]),e._v(" "),t("select",[t("option",[e._v("1")])])])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"flex flex-col border mr-4"},[t("div",[e._v("그림자크기")]),e._v(" "),t("select",[t("option",[e._v("1")])])])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"mt-4 w-full"},[t("p",[e._v("화면에서 글자를 드래그 또는")]),e._v(" "),t("p",[e._v("좌표를 입력하여 이동 가능")])])}],!1,null,"5ddc7a3f",null);t.default=component.exports},666:function(e,t){}}]);