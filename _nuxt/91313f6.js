(window.webpackJsonp=window.webpackJsonp||[]).push([[202,178],{1332:function(e,t,r){"use strict";r.r(t);r(13),r(17);var n=r(7),o=r(8),c=r(10),l=r(9),d=r(6),f=r(3),h=r(1),m=r(38),v=r(18),y=r(419);function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(d.a)(e);if(t){var o=Object(d.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(l.a)(this,r)}}var k=function(e){Object(c.a)(r,e);var t=x(r);function r(){var e;return Object(n.a)(this,r),(e=t.apply(this,arguments)).PopupStore=Object(h.getModule)(v.default,e.$store),e.UploadStore=Object(h.getModule)(y.default,e.$store),e.AuthStore=Object(h.getModule)(m.default,e.$store),e.watermarkRemoved=!1,e.selectedCouponCode=null,e}return Object(o.a)(r,[{key:"franchise",get:function(){return this.AuthStore.privateUserInfo.franchise}},{key:"coupons",get:function(){return this.UploadStore.coupons||[]}},{key:"close",value:function(){this.popup=!1}},{key:"click",value:function(){return this.selectedCouponCode}}]),r}(h.Vue);Object(f.a)([Object(h.VModel)()],k.prototype,"popup",void 0),Object(f.a)([Object(h.Prop)()],k.prototype,"buttonLabel",void 0),Object(f.a)([Object(h.Emit)("change")],k.prototype,"click",null);var P=k=Object(f.a)([h.Component],k),w=r(12),component=Object(w.a)(P,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("Popup",{model:{value:e.popup,callback:function(t){e.popup=t},expression:"popup"}},[e.coupons.length?t("div",{staticClass:"flex flex-col items-center bg-white rounded-xl"},[t("div",{staticClass:"w-full rounded-t-xl text-center leading-10"},[t("div",{staticClass:"p-12"},[t("div",{staticClass:"mb-8"},[e._v("\n          사용할 쿠폰을 선택해 주세요.\n        ")]),e._v(" "),t("div",{staticClass:"p-6 flex flex-col items-start w-full max-h-[13.5rem] bg-[#f9f9f9] rounded-lg border border-[#ccc] overflow-scroll"},e._l(e.coupons,(function(r){return t("div",{key:r.id,staticClass:"my-2 first-of-type:mt-0 last-of-type:mb-0"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedCouponCode,expression:"selectedCouponCode"}],staticClass:"form-radio mr-2 text-[#000000]",attrs:{id:r.code,type:"radio"},domProps:{value:r.code,checked:e._q(e.selectedCouponCode,r.code)},on:{change:function(t){e.selectedCouponCode=r.code}}}),e._v(" "),t("label",{attrs:{for:r.code}},[e._v(e._s(r.code))])])})),0)]),e._v(" "),t("div",{staticClass:"flex w-full"},[t("button",{staticClass:"modalbtn-l",on:{click:e.close}},[e._v("\n          닫기\n        ")]),e._v(" "),t("button",{staticClass:"modalbtn-r",on:{click:e.click}},[e._v("\n          "+e._s(e.buttonLabel)+"\n        ")])])])]):t("div",{staticClass:"flex flex-col items-center w-full bg-white rounded-xl"},[t("div",{staticClass:"w-full rounded-t-xl text-center leading-10"},[t("div",{staticClass:"p-12"},[e._v("\n        사용할 수 있는 쿠폰이 없습니다.\n        "),t("br"),e._v("\n        쿠폰 관리 페이지를 확인해 주세요.\n      ")]),e._v(" "),t("div",{staticClass:"flex w-full"},[t("nuxt-link",{staticClass:"modalbtn !bg-[#000000] !text-white",attrs:{draggable:"false",to:"/partner/coupons"}},[e._v("\n          쿠폰 관리 바로가기\n        ")])],1)])])])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Popup:r(54).default})},1469:function(e,t,r){"use strict";r.r(t);r(17),r(51),r(29),r(53),r(43),r(28),r(34),r(56),r(57),r(47);var n=r(14),o=r(7),c=r(8),l=r(10),d=r(9),f=r(6),h=(r(13),r(32),r(39),r(3)),m=r(1),v=r(1332),y=r(18),x=r(419),k=r(38);function P(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==r.return||r.return()}finally{if(l)throw o}}}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(f.a)(e);if(t){var o=Object(f.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(d.a)(this,r)}}var S=function(e){Object(l.a)(h,e);var t,r,d,f=C(h);function h(){var e;return Object(o.a)(this,h),(e=f.apply(this,arguments)).PopupStore=Object(m.getModule)(y.default,e.$store),e.UploadStore=Object(m.getModule)(x.default,e.$store),e.AuthStore=Object(m.getModule)(k.default,e.$store),e.watermarkRemoved=!1,e}return Object(c.a)(h,[{key:"popup",get:function(){return this.PopupStore.watermarkPopup},set:function(e){this.PopupStore.toggleWaterMarkPopup(e)}},{key:"index",get:function(){return this.UploadStore.uploadIndex}},{key:"waterMarkItem",get:function(){return this.PopupStore.waterMarkItem}},{key:"franchise",get:function(){return this.AuthStore.privateUserInfo.franchise}},{key:"purchaseInProgress",get:function(){return this.UploadStore.purchaseInProgress},set:function(e){this.UploadStore.setPurchaseInProgress(e)}},{key:"onClick",value:(d=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return alert("쿠폰을 선택해 주세요."),e.abrupt("return");case 3:return e.next=5,this.requestRemoveWatermarkByCoupon(t);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"cleanWaterMarkItem",value:function(){this.PopupStore.setWaterMarkItem(null)}},{key:"requestRemoveWatermarkByCoupon",value:(r=Object(n.a)(regeneratorRuntime.mark((function e(t){var r,body,n,o,c,l,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.waterMarkItem,body={extend:"1y",coupon:t},e.next=4,this.$axios.$patch("/payments/watermark/".concat(r.id),body);case 4:if(!e.sent.expiredDate){e.next=17;break}return e.next=8,this.$axios.$get("/uploads");case 8:n=e.sent,o=P(n);try{for(o.s();!(c=o.n()).done;)(l=c.value).expand=!1,l.hamburger=!1,8===(d=l.options).selectedBodyHTMLId?l.thumbnail="https://cdn2.makedear.com/homepage/img/upload/main9.jpg":l.thumbnail=d.image.url||"https://cdn2.makedear.com/homepage/img/upload/no-thumb.jpg"}catch(e){o.e(e)}finally{o.f()}this.cleanWaterMarkItem(),this.UploadStore.setUploads(n),this.PopupStore.setWatermarkRemoved(!0),this.popup=!1,e.next=18;break;case 17:alert("쿠폰 사용 실패");case 18:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"requestRemoveWatermark",value:(t=Object(n.a)(regeneratorRuntime.mark((function e(){var t,r,n,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.waterMarkItem,localStorage.getItem("md-rm-".concat(t.code)),(r=new Date).setMinutes(r.getMinutes()+1),localStorage.setItem("md-rm-".concat(t.code),r.toString()),!this.purchaseInProgress){e.next=8;break}return alert("결제 확인중입니다."),e.abrupt("return");case 8:return this.PopupStore.setPurchaseLoadingPercentage(0),this.PopupStore.setPurchaseWaitingPopup(!0),this.PopupStore.setPurchaseWaitingText("결제 확인중입니다."),this.purchaseInProgress=!0,e.next=14,this.$axios.$patch("/payments/watermark/".concat(t.id),{extend:"1y"});case 14:if(n=e.sent,this.PopupStore.setPurchaseWaitingPopup(!1),this.purchaseInProgress=!1,"doesNotMatch"!==n.type){e.next=23;break}return this.PopupStore.setPurchasedItem(n.data.purchased),this.PopupStore.setRequestedItem(n.data.requested),this.PopupStore.setPurchaseDoesNotMatchPopup(!0),this.popup=!1,e.abrupt("return");case 23:if("purchaseRequest"!==n.type){e.next=32;break}return this.PopupStore.setPurchaseType("WATERMARK"),e.next=27,this.$axios.$get("/payments/payment-url/".concat(t.id));case 27:return o=e.sent,this.PopupStore.setPurchaseURLs(o),this.PopupStore.setPurchaseRequestPopup(!0),this.popup=!1,e.abrupt("return");case 32:if(!n.expiredDate){e.next=38;break}return this.close(),this.PopupStore.setWatermarkRemoved(!0),this.UploadStore.setUploadasWatermarkRemoved({index:this.index,expiredDate:n.expiredDate}),window.location.reload(),e.abrupt("return");case 38:return this.PopupStore.setPurchaseType("WATERMARK"),e.next=41,this.$axios.$get("/payments/payment-url/".concat(t.id));case 41:c=e.sent,this.PopupStore.setPurchaseURLs(c),this.PopupStore.setPurchaseRequestPopup(!0),this.popup=!1;case 45:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"close",value:function(){this.cleanWaterMarkItem(),this.popup=!1}}]),h}(m.Vue),j=S=Object(h.a)([Object(m.Component)({components:{PartnerPurchasePopup:v.default}})],S),O=r(12),component=Object(O.a)(j,(function(){var e=this,t=e._self._c;e._self._setupProxy;return e.franchise?t("PartnerPurchasePopup",{attrs:{"button-label":"워터마크 제거"},on:{change:e.onClick},model:{value:e.popup,callback:function(t){e.popup=t},expression:"popup"}}):t("Popup",{model:{value:e.popup,callback:function(t){e.popup=t},expression:"popup"}},[t("div",{staticClass:"flex flex-col items-center bg-white rounded-xl"},[t("div",{staticClass:"p-8 sm:p-12 w-full rounded-t-xl text-center leading-10"},[e._v("\n      초대장은 워터마크 제거 후에도 편집할 수 있어요.\n      "),t("br"),e._v("\n      워터마크를 제거하시겠습니까?\n    ")]),e._v(" "),t("div",{staticClass:"flex w-full"},[t("button",{staticClass:"modalbtn-l",on:{click:e.close}},[e._v("\n        닫기\n      ")]),e._v(" "),t("button",{staticClass:"modalbtn-r",on:{click:e.requestRemoveWatermark}},[e._v("\n        워터마크 제거\n      ")])])])])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Popup:r(54).default})}}]);