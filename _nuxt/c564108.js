(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{1284:function(t,e,o){"use strict";(function(t){o(13),o(17);var r=o(14),n=o(7),c=o(8),l=o(10),d=o(9),h=o(6),f=(o(39),o(52),o(206),o(75),o(93),o(28),o(69),o(48),o(212),o(3)),m=o(1),v=o(741),y=o(165),k=o(15),x=o(18);o(742),o(743);function w(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var o,r=Object(h.a)(t);if(e){var n=Object(h.a)(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return Object(d.a)(this,o)}}var j=function(e){Object(l.a)(d,e);var o=w(d);function d(){var t;return Object(n.a)(this,d),(t=o.apply(this,arguments)).MainStore=Object(m.getModule)(k.default,t.$store),t.PopupStore=Object(m.getModule)(x.default,t.$store),t.testImg="https://cdn2.makedear.com/homepage/img/example/wedding.jpeg",t.uploading=!1,t.degree=0,t}return Object(c.a)(d,[{key:"image",get:function(){var t;return null===(t=this.MainStore.editor.map)||void 0===t?void 0:t.sketchMap.mapImageURL[Number(this.index)]},set:function(t){this.MainStore.setData({path:this.path,key:this.pathkey,value:t})}},{key:"edit",get:function(){var t;return null===(t=this.MainStore.editor.map)||void 0===t?void 0:t.sketchMap.mapImageURL[Number(this.index)].edit},set:function(t){this.MainStore.setData({path:"map.sketchMap.mapImageURL.".concat(this.index),key:"edit",value:t})}},{key:"computedSquare",get:function(){return this.square||"string"==typeof this.square}},{key:"onClickEdit",value:function(){this.degree=this.image.degree||0,this.edit=!0}},{key:"getVailidFile",value:function(data){for(var t=data.length,i=0;i<t;i++){var e=data.item(i);if(null==e?void 0:e.type.includes("image/"))return e}return null}},{key:"deleteImage",value:function(){this.image={url:"",original:"",thumbnail:""},null!=this.index&&this.MainStore.deleteSketchMap(this.index),this.edit=!1}},{key:"setEditMode",value:function(t){var e=this;this.edit=t,this.edit&&!this.uploading&&this.$nextTick((function(){e.$refs["".concat(e.path).concat(e.pathkey,"-cropper")].replace(e.imageProxy(e.image.original)),e.$nextTick((function(){e.setCropData()}))}))}},{key:"setCropData",value:function(){this.$refs["".concat(this.path).concat(this.pathkey,"-cropper")].setData(this.image.cropData)}},{key:"rotateImage",value:function(t){var e=this.$refs["".concat(this.path).concat(this.pathkey,"-cropper")];e.rotate(t);e.getImageData()}},{key:"rotateAdvancedImage",value:function(t){var e=this.$refs["".concat(this.path).concat(this.pathkey,"-advanced-cropper")];this.degree+=t,e.rotate(t)}},{key:"touchStart",value:function(e){/iphone|ipad|ipod|android/i.test(t.navigator.userAgent.toLowerCase())&&(t.navigator.userAgent.toLowerCase().search("android")>-1&&e.preventDefault())}},{key:"openPopup",value:function(){var t=this.image.cropPosition,e=this.image.cropSize,o={path:"gallery",key:"",imageURL:this.image.url,original:this.image.original,index:this.index,degree:this.image.degree,cropRatio:null,cropPosition:t,cropSize:e,firstUpload:this.image.firstUpload};this.MainStore.setImageEditor(o),this.PopupStore.toggleEditSketchMapPopup(!0)}},{key:"uploadImage",value:function(){var t=this,e=this.$refs["".concat(this.path).concat(this.pathkey,"-advanced-cropper")].getResult(),o=e.coordinates,canvas=e.canvas,data=new FormData;canvas.toBlob(function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(r){var n,image,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return data.append("images",r),e.next=3,t.$axios.post("/image",data);case 3:n=e.sent,image=n.data,c={url:image,original:t.image.original,thumbnail:"",cropSize:{width:o.width,height:o.height},cropPosition:{left:o.left,top:o.top},edit:!1,degree:t.degree},t.image=c,null!=t.index&&t.MainStore.editSketchMap({i:t.index,val:c});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"watchImage",value:function(){this.edit&&this.$nextTick((function(){}))}},{key:"mounted",value:function(){this.edit=!1}}]),d}(Object(m.mixins)(m.Vue,y.a));Object(f.a)([Object(m.Prop)()],j.prototype,"path",void 0),Object(f.a)([Object(m.Prop)()],j.prototype,"pathkey",void 0),Object(f.a)([Object(m.Prop)({default:NaN})],j.prototype,"cropratio",void 0),Object(f.a)([Object(m.Prop)({default:null})],j.prototype,"index",void 0),Object(f.a)([Object(m.Prop)({default:!1,required:!1})],j.prototype,"square",void 0),Object(f.a)([Object(m.Prop)({default:!1})],j.prototype,"fluid",void 0),Object(f.a)([Object(m.Watch)("image",{deep:!0})],j.prototype,"watchImage",null),j=Object(f.a)([Object(m.Component)({components:{Cropper:v.a}})],j),e.a=j}).call(this,o(82))},1316:function(t,e,o){var content=o(1365);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(64).default)("f3b30e92",content,!0,{sourceMap:!1})},1364:function(t,e,o){"use strict";o(1316)},1365:function(t,e,o){var r=o(63)((function(i){return i[1]}));r.push([t.i,".element[data-v-e0962468]{border:1px solid #d7d7d7}.cropper[data-v-e0962468]{height:240px}",""]),r.locals={},t.exports=r},1532:function(t,e,o){"use strict";o.r(e);var r=o(1284).a,n=(o(1364),o(12)),component=Object(n.a)(r,(function(){var t=this,e=t._self._c;t._self._setupProxy;return t.image?e("div",{class:{"sm:w-[34rem]":!t.fluid}},[t.image.url&&!t.edit?e("div",{staticClass:"flex flex-col"},[e("div",{staticClass:"relative flex items-center h-80 sm:h-96 basicstyle overflow-hidden",class:{"w-[90%] sm:w-[34rem]":!t.fluid}},[e("div",{staticClass:"mx-auto flex h-full",class:{"sm:w-[34rem]":!t.fluid}},[e("nuxt-img",{staticClass:"mx-auto flex max-w-full max-h-full object-contain bg-white",attrs:{src:t.imageProxy(t.image.url),draggable:"none"},on:{touchstart:t.touchStart}})],1),t._v(" "),e("button",{staticClass:"p-2 absolute right-3 top-3 bg-white opacity-90 bg-[#fafafa] border border-[#ccc] rounded-md",on:{click:t.deleteImage}},[e("svg",{staticClass:"h-6 w-6",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"}},[e("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"}})])]),t._v(" "),e("button",{staticClass:"px-6 py-3 absolute left-1/2 -translate-x-1/2 bottom-3 opacity-90 bg-[#fafafa] border border-[#ccc] rounded-md",on:{click:t.openPopup}},[t._v("\n        편집\n      ")])])]):t.image?t._e():e("div",{staticClass:"w-full h-full flex items-center justify-center",class:{"sm:h-[28rem]":t.computedSquare}},[e("svg",{staticClass:"animate-spin h-12 w-12 text-red-400",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"}},[e("circle",{staticClass:"opacity-25",attrs:{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}}),t._v(" "),e("path",{staticClass:"opacity-75",attrs:{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"}})])])]):e("div",[t._v("\n  없음\n")])}),[],!1,null,"e0962468",null);e.default=component.exports}}]);